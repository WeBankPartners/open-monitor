import axios from 'axios'
import {baseURL_config} from './baseURL'
import { getToken } from '@/assets/js/cookies.ts'
export default function ajax (options) {
  const ajaxObj = {
    method: options.method,
    baseURL: baseURL_config,
    url: options.url,
    timeout: 30000,
    params: options.params,
    // params: options.params || '',
    headers: {
      'Content-type': 'application/json;charset=UTF-8',
      'X-Auth-Token': getToken() || null,
      'Authorization': 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTcxMTM1OTE1MCwidHlwZSI6ImFjY2Vzc1Rva2VuIiwiY2xpZW50VHlwZSI6IlVTRVIiLCJleHAiOjIyODY0OTU5MTUwLCJhdXRob3JpdHkiOiJbU1VQRVJfQURNSU4sVFJFRVZFTlRfTE9HX1FVRVJZLEFETUlOX0lUU19EQU5HRVJPVVNfQ09ORklHLEFETUlOX0NFUlRJRklDQVRJT04sQ09MTEFCT1JBVElPTl9QTFVHSU5fTUFOQUdFTUVOVCxUQVNLX1RFTVBMQVRFX0dST1VQX01BTkFHRU1FTlQsVEFTS19UQVNLX01BTkFHRU1FTlQscmVwb3J0X2NvbmZpZ3VyYXRpb24sSU1QTEVNRU5UQVRJT05fQkFUQ0hfRVhFQ1VUSU9OLEFETUlOX0NNREJfTU9ERUxfTUFOQUdFTUVOVCxDTURCX0FETUlOX0JBU0VfREFUQV9NQU5BR0VNRU5ULEFETUlOX1FVRVJZX0xPRyxNRU5VX0FETUlOX1BFUk1JU1NJT05fTUFOQUdFTUVOVCxNRU5VX0lEQ19SRVNPVVJDRV9QTEFOTklORyxNRU5VX0NNREJfQURNSU5fQkFTRV9EQVRBX01BTkFHRU1FTlQsTUVOVV9ERVNJR05JTkdfQ0lfSU5URUdSQVRFRF9RVUVSWV9FWEVDVVRJT04sTUVOVV9BUFBMSUNBVElPTl9ERVBMT1lNRU5UX0RFU0lHTixNRU5VX0RFU0lHTklOR19DSV9EQVRBX01BTkFHRU1FTlQsTUVOVV9ERVNJR05JTkdfQ0lfSU5URUdSQVRFRF9RVUVSWV9NQU5BR0VNRU5ULE1FTlVfSURDX1BMQU5OSU5HX0RFU0lHTixNRU5VX0FQUExJQ0FUSU9OX0FSQ0hJVEVDVFVSRV9RVUVSWSxNRU5VX0FQUExJQ0FUSU9OX0FSQ0hJVEVDVFVSRV9ERVNJR04sTUVOVV9ERVNJR05JTkdfQ0lfREFUQV9FTlFVSVJZLE1FTlVfQURNSU5fUVVFUllfTE9HLE1FTlVfQURNSU5fQ01EQl9NT0RFTF9NQU5BR0VNRU5ULE1PTklUT1JfQUxBUk1fTUFOQUdFTUVOVCxBRE1JTl9URVJSQUZPUk1fREVCVUcsSU1QTEVNRU5UQVRJT05fQVJUSUZBQ1RfTUFOQUdFTUVOVCxUQVNLX1JFUVVFU1RfQVVESVQsZGF0YV9tZ210X3ZpZXcsTU9OSVRPUl9NQUlOX0RBU0hCT0FSRCxiYXNla2V5X2NvbmZpZ3VyYXRpb24sc3lzdGVtX29wZXJhdGlvbl9sb2csSU1QTEVNRU5UQVRJT05fV09SS0ZMT1dfRVhFQ1VUSU9OLE1PTklUT1JfQ1VTVE9NX0RBU0hCT0FSRCxBRE1JTl9URVJNSU5BTF9DT05GSUcsY2lfdGVtcGxhdGVfY29uZmlndXJhdGlvbixUQVNLX1JFUVVFU1RfTUFOQUdFTUVOVCxNT05JVE9SX0FMQVJNX0NPTkZJRyxUUkVFVkVOVF9DT05GSUcsTU9OSVRPUl9NRVRSSUNfQ09ORklHLFRSRUVWRU5UX0xJU1QsbW9kZWxfY29uZmlndXJhdGlvbixBRE1JTl9SRVNPVVJDRVNfTUFOQUdFTUVOVCxncmFwaF9jb25maWcsVFJFRVZFTlRfU0VRX0NPTkZJRyxUQVNLX1dPUktCRU5DSCxBRE1JTl9TWVNURU1fUEFSQU1TLHN0YXRlX21hY2hpbmVfY29uZmlndXJhdGlvbixBRE1JTl9URVJSQUZPUk1fQ09ORklHLGRhdGFfcXVlcnlfcmVwb3J0LGRhdGFfbWdtdF9jaSxJTVBMRU1FTlRBVElPTl9URVJNSU5BTCxDQVBBQ0lUWV9GT1JFQ0FTVCxkYXRhX3F1ZXJ5X2NpLGRhdGFfcXVlcnlfdmlldyxBRE1JTl9TWVNURU1fV09SS0ZMT1dfUkVQT1JULENPTExBQk9SQVRJT05fV09SS0ZMT1dfT1JDSEVTVFJBVElPTixBRE1JTl9VU0VSX1JPTEVfTUFOQUdFTUVOVCxBRE1JTl9TWVNURU1fREFUQV9NT0RFTCxDQVBBQ0lUWV9NT0RFTCxUUkVFVkVOVF9NT05JVE9SX1FVRVJZLEFETUlOX1RFUk1JTkFMX0FVRElULFRBU0tfVEVNUExBVEVfTUFOQUdFTUVOVF0ifQ.Ex0LnEf0V1bywLzUb59du-CLduyy6URi11zxNWppqQedlr_Zl1nGYba879ZjZrbWrL_5aQXI4jHlVqXMVrCg4w'
      // 'Authorization': 'Bearer ' + localStorage.getItem('monitor-accessToken')
    },
    // data: JSON.stringify(options.data || '')
    data: JSON.stringify(options.data)
  }
  // 导出请求时增加响应类型
  if (options.url.endsWith('/export')) {
    ajaxObj.responseType = 'blob'
  }
  return window.request ? window.request(ajaxObj) : axios(ajaxObj)
}
