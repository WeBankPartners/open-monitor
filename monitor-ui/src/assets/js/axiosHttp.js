import { getToken } from '@/assets/js/cookies.ts'
import axios from 'axios'
import { baseURL_config } from './baseURL'
export default function ajax(options) {
  const ajaxObj = {
    method: options.method,
    baseURL: baseURL_config,
    url: options.url,
    timeout: 30000,
    params: options.params,
    // params: options.params || '',
    headers: {
      'Content-type': 'application/json;charset=UTF-8',
      'X-Auth-Token': getToken() || null,
      Authorization: 'Bearer ' + 'eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTc1NjI5MjI5MCwiZXhwIjoxNzU3MTU2MjkwLCJ0eXBlIjoiYWNjZXNzVG9rZW4iLCJjbGllbnRUeXBlIjoiIiwicm9sZXMiOltdLCJhdXRob3JpdHkiOiJbU1VCX1NZU1RFTSxTVVBFUl9BRE1JTixBRE1JTl9SRVNPVVJDRVNfTUFOQUdFTUVOVCxkYXRhX3F1ZXJ5X3ZpZXcsQURNSU5fVEVSUkFGT1JNX0NPTkZJRyxSRVBPUlRfREFUQVNFVCxBRE1JTl9TWVNURU1fREFUQV9NT0RFTCxBRE1JTl9DRVJUSUZJQ0FUSU9OLFJFUE9SVF9DSEFSVCxBRE1JTl9URVJSQUZPUk1fREVCVUcsZGF0YV9tZ210X3ZpZXcsQURNSU5fQ01EQl9NT0RFTF9NQU5BR0VNRU5ULENNREJfQURNSU5fQkFTRV9EQVRBX01BTkFHRU1FTlQsQURNSU5fUVVFUllfTE9HLE1FTlVfQURNSU5fUEVSTUlTU0lPTl9NQU5BR0VNRU5ULFRBU0tfVEFTS19NQU5BR0VNRU5ULFRBU0tfUkVRVUVTVF9NQU5BR0VNRU5ULHN5c3RlbV9vcGVyYXRpb25fbG9nLE1PTklUT1JfQURNSU5JU1RSQVRPUl9DT05GSUcsQURNSU5fQkFTRV9NSUdSQVRJT04sQURNSU5fVEVSTUlOQUxfQVVESVQsZGF0YV9xdWVyeV9jaSxUQVNLX1dPUktCRU5DSCxBRE1JTl9URVJNSU5BTF9DT05GSUcsTU9OSVRPUl9DVVNUT01fREFTSEJPQVJELFJFUE9SVF9EQVNIQk9BUkQsZGF0YV9tYW5hZ2VtZW50X2ltcG9ydCxBRE1JTl9TWVNURU1fUEFSQU1TLEFETUlOX1VTRVJfUk9MRV9NQU5BR0VNRU5ULG1vZGVsX2NvbmZpZ3VyYXRpb24sQ09MTEFCT1JBVElPTl9QTFVHSU5fTUFOQUdFTUVOVCxJTVBMRU1FTlRBVElPTl9CQVRDSF9FWEVDVVRJT04sTU9OSVRPUl9NQUlOX0RBU0hCT0FSRCxzdGF0ZV9tYWNoaW5lX2NvbmZpZ3VyYXRpb24sSU1QTEVNRU5UQVRJT05fV09SS0ZMT1dfRVhFQ1VUSU9OLE1PTklUT1JfQUxBUk1fQ09ORklHLE1PTklUT1JfTUVUUklDX0NPTkZJRyxiYXNla2V5X2NvbmZpZ3VyYXRpb24sZGF0YV9xdWVyeV9yZXBvcnQsSU1QTEVNRU5UQVRJT05fVEVSTUlOQUwsZ3JhcGhfY29uZmlnLE1PTklUT1JfQUxBUk1fTUFOQUdFTUVOVCxkYXRhX3N5bmNocm9uaXphdGlvbl9jb25maWcsSU1QTEVNRU5UQVRJT05fQVJUSUZBQ1RfTUFOQUdFTUVOVCxjaV90ZW1wbGF0ZV9jb25maWd1cmF0aW9uLEFETUlOX1NZU1RFTV9XT1JLRkxPV19SRVBPUlQsZGF0YV9tZ210X2NpLFRBU0tfUkVRVUVTVF9BVURJVCxUQVNLX1RFTVBMQVRFX01BTkFHRU1FTlQsQURNSU5fSVRTX0RBTkdFUk9VU19DT05GSUcsQ09MTEFCT1JBVElPTl9XT1JLRkxPV19PUkNIRVNUUkFUSU9OLHJlcG9ydF9jb25maWd1cmF0aW9uLFRBU0tfVEVNUExBVEVfR1JPVVBfTUFOQUdFTUVOVCxBUFBfREVWLEhPU1RfUk9PVF9URU1QLFNUR19PUFMsTU9OSVRPUl9BRE1JTixDTURCX0FETUlOLFBSRF9PUFMsQVBQX0FSQ10iLCJuZWVkUmVnaXN0ZXIiOmZhbHNlfQ.emsnsbgdusUvEXtb1MlMHOZFbJnx5tt6uNDe1elkLRjBBf97cQmQN2uD9zQh5rEjB0QKlhFKgHBY77aCx62X4g'
    },
    // data: JSON.stringify(options.data || '')
    data: JSON.stringify(options.data),
  }
  // 导出请求时增加响应类型
  if (options.url.endsWith('/export')) {
    ajaxObj.responseType = 'blob'
  }
  return window.request ? window.request(ajaxObj) : axios(ajaxObj)
}
