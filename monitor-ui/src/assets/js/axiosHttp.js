import axios from 'axios'
import {baseURL_config} from './baseURL'
import { getToken } from '@/assets/js/cookies.ts'
export default function ajax(options) {
  const ajaxObj = {
    method: options.method,
    baseURL: baseURL_config,
    url: options.url,
    timeout: 30000,
    params: options.params,
    // params: options.params || '',
    headers: {
      'Content-type': 'application/json;charset=UTF-8',
      'X-Auth-Token': getToken() || null,
      Authorization: 'Bearer ' + 'eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTcyMTYzMzMzMywidHlwZSI6ImFjY2Vzc1Rva2VuIiwiY2xpZW50VHlwZSI6IlVTRVIiLCJleHAiOjIyODc1MjMzMzMzLCJhdXRob3JpdHkiOiJbTU9OSVRPUl9BRE1JTixNT05JVE9SX01BSU5fREFTSEJPQVJELE1PTklUT1JfQUxBUk1fQ09ORklHLE1PTklUT1JfTUVUUklDX0NPTkZJRyxNT05JVE9SX0FMQVJNX01BTkFHRU1FTlQsTU9OSVRPUl9DVVNUT01fREFTSEJPQVJELFRBU0tfVEVNUExBVEVfR1JPVVBfTUFOQUdFTUVOVCxUQVNLX1RFTVBMQVRFX01BTkFHRU1FTlQsVEFTS19SRVFVRVNUX01BTkFHRU1FTlQsVEFTS19UQVNLX01BTkFHRU1FTlQsVEFTS19XT1JLQkVOQ0gsZGF0YV9xdWVyeV9jaSxkYXRhX3F1ZXJ5X3JlcG9ydCxkYXRhX3F1ZXJ5X3ZpZXcsZGF0YV9tZ210X2NpLGRhdGFfbWdtdF92aWV3LHJlcG9ydF9jb25maWd1cmF0aW9uLGJhc2VrZXlfY29uZmlndXJhdGlvbixzdGF0ZV9tYWNoaW5lX2NvbmZpZ3VyYXRpb24sY2lfdGVtcGxhdGVfY29uZmlndXJhdGlvbixncmFwaF9jb25maWcsSU1QTEVNRU5UQVRJT05fV09SS0ZMT1dfRVhFQ1VUSU9OLElNUExFTUVOVEFUSU9OX0JBVENIX0VYRUNVVElPTixJTVBMRU1FTlRBVElPTl9URVJNSU5BTCxJTVBMRU1FTlRBVElPTl9BUlRJRkFDVF9NQU5BR0VNRU5ULENBUEFDSVRZX01PREVMLENBUEFDSVRZX0ZPUkVDQVNULFRSRUVWRU5UX0NPTkZJRyxUUkVFVkVOVF9MSVNULFRSRUVWRU5UX1NFUV9DT05GSUcsVFJFRVZFTlRfTE9HX1FVRVJZLFRSRUVWRU5UX01PTklUT1JfUVVFUlksQ09MTEFCT1JBVElPTl9QTFVHSU5fTUFOQUdFTUVOVCxDT0xMQUJPUkFUSU9OX1dPUktGTE9XX09SQ0hFU1RSQVRJT04sQURNSU5fU1lTVEVNX1BBUkFNUyxBRE1JTl9SRVNPVVJDRVNfTUFOQUdFTUVOVCxBRE1JTl9VU0VSX1JPTEVfTUFOQUdFTUVOVCxBRE1JTl9TWVNURU1fREFUQV9NT0RFTCxBRE1JTl9DRVJUSUZJQ0FUSU9OLEFETUlOX1NZU1RFTV9XT1JLRkxPV19SRVBPUlQsQURNSU5fSVRTX0RBTkdFUk9VU19DT05GSUcsQURNSU5fVEVSUkFGT1JNX0NPTkZJRyxBRE1JTl9URVJSQUZPUk1fREVCVUcsQURNSU5fVEVSTUlOQUxfQVVESVQsQURNSU5fVEVSTUlOQUxfQ09ORklHLHN5c3RlbV9vcGVyYXRpb25fbG9nLENNREJfQURNSU4sbW9kZWxfY29uZmlndXJhdGlvbixyb2xlRixUQVNLX1JFUVVFU1RfQVVESVQsU1VQRVJfQURNSU4sQURNSU5fQ01EQl9NT0RFTF9NQU5BR0VNRU5ULENNREJfQURNSU5fQkFTRV9EQVRBX01BTkFHRU1FTlQsQURNSU5fUVVFUllfTE9HLE1FTlVfQURNSU5fUEVSTUlTU0lPTl9NQU5BR0VNRU5ULE1FTlVfSURDX1JFU09VUkNFX1BMQU5OSU5HLE1FTlVfQ01EQl9BRE1JTl9CQVNFX0RBVEFfTUFOQUdFTUVOVCxNRU5VX0RFU0lHTklOR19DSV9JTlRFR1JBVEVEX1FVRVJZX0VYRUNVVElPTixNRU5VX0FQUExJQ0FUSU9OX0RFUExPWU1FTlRfREVTSUdOLE1FTlVfREVTSUdOSU5HX0NJX0RBVEFfTUFOQUdFTUVOVCxNRU5VX0RFU0lHTklOR19DSV9JTlRFR1JBVEVEX1FVRVJZX01BTkFHRU1FTlQsTUVOVV9JRENfUExBTk5JTkdfREVTSUdOLE1FTlVfQVBQTElDQVRJT05fQVJDSElURUNUVVJFX1FVRVJZLE1FTlVfQVBQTElDQVRJT05fQVJDSElURUNUVVJFX0RFU0lHTixNRU5VX0RFU0lHTklOR19DSV9EQVRBX0VOUVVJUlksTUVOVV9BRE1JTl9RVUVSWV9MT0csTUVOVV9BRE1JTl9DTURCX01PREVMX01BTkFHRU1FTlQsSUZBX09QUyx0ZXN0MDEsVEVTVF9NT05JVE9SLEpPQlNfU0VSVklDRV9DQVRBTE9HX01BTkFHRU1FTlQsSk9CU19UQVNLX01BTkFHRU1FTlQs6KeS6Imy566h55CG5ZGY5rWL6K-VLENVUkRfQURNSU4scm9va2llLXRlc3QtMixBUFBfREVWLEpPQlNfVEVNUExBVEVfR1JPVVBfTUFOQUdFTUVOVCxKT0JTX1RFTVBMQVRFX01BTkFHRU1FTlQsSk9CU19SRVFVRVNUX01BTkFHRU1FTlQsNTIxLXRlc3QsQ1VSRF9BRE1JTjMscm9va2llX3Rlc3Q3LFNVQl9TWVNURU0sdGVzdDUsdGVzdF9hYWEsSUZBX0FSQyxURVNULENVUkRfQURNSU5fdGVzdCxBUFBfQVJDLFNUR19PUFMsUFJEX09QUyxDRF9PUFNdIn0.qM34kTMKsDSaS_f0TPCQ0JWQiubiV5CfTHek3Ga1SCEXh4AXQC86XZXyhYzVBfHztHiRi4B6sqfpq8B6GPeZVA'
    },
    // data: JSON.stringify(options.data || '')
    data: JSON.stringify(options.data)
  }
  // 导出请求时增加响应类型
  if (options.url.endsWith('/export')) {
    ajaxObj.responseType = 'blob'
  }
  return window.request ? window.request(ajaxObj) : axios(ajaxObj)
}
