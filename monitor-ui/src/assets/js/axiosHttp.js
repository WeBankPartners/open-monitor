import { getToken } from '@/assets/js/cookies.ts'
import axios from 'axios'
import { baseURL_config } from './baseURL'
export default function ajax(options) {
  const ajaxObj = {
    method: options.method,
    baseURL: baseURL_config,
    url: options.url,
    timeout: 30000,
    params: options.params,
    // params: options.params || '',
    headers: {
      'Content-type': 'application/json;charset=UTF-8',
      'X-Auth-Token': getToken() || null,
      Authorization: 'Bearer ' + 'eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTc1NzQ3MzIzOCwiZXhwIjoxNzU4MzM3MjM4LCJ0eXBlIjoiYWNjZXNzVG9rZW4iLCJjbGllbnRUeXBlIjoiIiwicm9sZXMiOltdLCJhdXRob3JpdHkiOiJbU1VCX1NZU1RFTSxTVVBFUl9BRE1JTixBRE1JTl9SRVNPVVJDRVNfTUFOQUdFTUVOVCxkYXRhX3F1ZXJ5X3ZpZXcsQURNSU5fVEVSUkFGT1JNX0NPTkZJRyxBRE1JTl9TWVNURU1fREFUQV9NT0RFTCxBRE1JTl9DRVJUSUZJQ0FUSU9OLEFETUlOX1RFUlJBRk9STV9ERUJVRyxSRVBPUlRfREFUQVNFVCxkYXRhX21nbXRfdmlldyxBRE1JTl9DTURCX01PREVMX01BTkFHRU1FTlQsQ01EQl9BRE1JTl9CQVNFX0RBVEFfTUFOQUdFTUVOVCxBRE1JTl9RVUVSWV9MT0csTUVOVV9BRE1JTl9QRVJNSVNTSU9OX01BTkFHRU1FTlQsc3lzdGVtX29wZXJhdGlvbl9sb2csTU9OSVRPUl9BRE1JTklTVFJBVE9SX0NPTkZJRyxBRE1JTl9CQVNFX01JR1JBVElPTixBRE1JTl9URVJNSU5BTF9BVURJVCxkYXRhX3F1ZXJ5X2NpLFRBU0tfV09SS0JFTkNILEFETUlOX1RFUk1JTkFMX0NPTkZJRyxNT05JVE9SX0NVU1RPTV9EQVNIQk9BUkQsZGF0YV9tYW5hZ2VtZW50X2ltcG9ydCxSRVBPUlRfQ0hBUlQsQURNSU5fU1lTVEVNX1BBUkFNUyxBRE1JTl9VU0VSX1JPTEVfTUFOQUdFTUVOVCxtb2RlbF9jb25maWd1cmF0aW9uLENPTExBQk9SQVRJT05fUExVR0lOX01BTkFHRU1FTlQsSU1QTEVNRU5UQVRJT05fQkFUQ0hfRVhFQ1VUSU9OLE1PTklUT1JfTUFJTl9EQVNIQk9BUkQsUkVQT1JUX0RBVEFCQVNFX0NPTk5FQ1Qsc3RhdGVfbWFjaGluZV9jb25maWd1cmF0aW9uLElNUExFTUVOVEFUSU9OX1dPUktGTE9XX0VYRUNVVElPTixNT05JVE9SX0FMQVJNX0NPTkZJRyxiYXNla2V5X2NvbmZpZ3VyYXRpb24sZGF0YV9xdWVyeV9yZXBvcnQsSU1QTEVNRU5UQVRJT05fVEVSTUlOQUwsTU9OSVRPUl9NRVRSSUNfQ09ORklHLGdyYXBoX2NvbmZpZyxNT05JVE9SX0FMQVJNX01BTkFHRU1FTlQsZGF0YV9zeW5jaHJvbml6YXRpb25fY29uZmlnLElNUExFTUVOVEFUSU9OX0FSVElGQUNUX01BTkFHRU1FTlQsY2lfdGVtcGxhdGVfY29uZmlndXJhdGlvbixSRVBPUlRfREFTSEJPQVJELEFETUlOX1NZU1RFTV9XT1JLRkxPV19SRVBPUlQsZGF0YV9tZ210X2NpLFRBU0tfUkVRVUVTVF9BVURJVCxUQVNLX1RFTVBMQVRFX01BTkFHRU1FTlQsUkVQT1JUX1NRTF9FRElUT1IsQURNSU5fSVRTX0RBTkdFUk9VU19DT05GSUcsQ09MTEFCT1JBVElPTl9XT1JLRkxPV19PUkNIRVNUUkFUSU9OLHJlcG9ydF9jb25maWd1cmF0aW9uLFRBU0tfVEVNUExBVEVfR1JPVVBfTUFOQUdFTUVOVCxBUFBfREVWLEhPU1RfUk9PVF9URU1QLFNUR19PUFMsTU9OSVRPUl9BRE1JTixDTURCX0FETUlOLFBSRF9PUFMsQVBQX0FSQ10iLCJuZWVkUmVnaXN0ZXIiOmZhbHNlfQ.BfGuzyIgJ04a5o7GiSDjB0vj4W60OjvAU4ogjwlfqjIx-ePadrP62tzhhfbNvb1dXDyIDMCUwsoG_ZkQkBu-kg'
    },
    // data: JSON.stringify(options.data || '')
    data: JSON.stringify(options.data),
  }
  // 导出请求时增加响应类型
  if (options.url.endsWith('/export')) {
    ajaxObj.responseType = 'blob'
  }
  return window.request ? window.request(ajaxObj) : axios(ajaxObj)
}
