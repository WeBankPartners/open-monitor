import axios from 'axios'
import {baseURL_config} from './baseURL'
import { getToken } from '@/assets/js/cookies.ts'
export default function ajax(options) {
  const ajaxObj = {
    method: options.method,
    baseURL: baseURL_config,
    url: options.url,
    timeout: 30000,
    params: options.params,
    // params: options.params || '',
    headers: {
      'Content-type': 'application/json;charset=UTF-8',
      'X-Auth-Token': getToken() || null,
      Authorization: 'Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTcyNDMwNzcxMiwiZXhwIjoxNzI0Mzk0MTEyLCJ0eXBlIjoiYWNjZXNzVG9rZW4iLCJjbGllbnRUeXBlIjoiIiwicm9sZXMiOltdLCJhdXRob3JpdHkiOiJbTU9OSVRPUl9BRE1JTixNT05JVE9SX01BSU5fREFTSEJPQVJELE1PTklUT1JfQUxBUk1fQ09ORklHLE1PTklUT1JfQUxBUk1fTUFOQUdFTUVOVCxNT05JVE9SX0NVU1RPTV9EQVNIQk9BUkQsVEFTS19URU1QTEFURV9HUk9VUF9NQU5BR0VNRU5ULFRBU0tfVEVNUExBVEVfTUFOQUdFTUVOVCxUQVNLX1dPUktCRU5DSCxkYXRhX3F1ZXJ5X2NpLGRhdGFfcXVlcnlfcmVwb3J0LGRhdGFfcXVlcnlfdmlldyxkYXRhX21nbXRfY2ksZGF0YV9tZ210X3ZpZXcscmVwb3J0X2NvbmZpZ3VyYXRpb24sYmFzZWtleV9jb25maWd1cmF0aW9uLHN0YXRlX21hY2hpbmVfY29uZmlndXJhdGlvbixjaV90ZW1wbGF0ZV9jb25maWd1cmF0aW9uLGdyYXBoX2NvbmZpZyxJTVBMRU1FTlRBVElPTl9XT1JLRkxPV19FWEVDVVRJT04sSU1QTEVNRU5UQVRJT05fQkFUQ0hfRVhFQ1VUSU9OLElNUExFTUVOVEFUSU9OX1RFUk1JTkFMLElNUExFTUVOVEFUSU9OX0FSVElGQUNUX01BTkFHRU1FTlQsQ0FQQUNJVFlfTU9ERUwsQ0FQQUNJVFlfRk9SRUNBU1QsVFJFRVZFTlRfQ09ORklHLFRSRUVWRU5UX0xJU1QsVFJFRVZFTlRfU0VRX0NPTkZJRyxUUkVFVkVOVF9MT0dfUVVFUlksVFJFRVZFTlRfTU9OSVRPUl9RVUVSWSxDT0xMQUJPUkFUSU9OX1BMVUdJTl9NQU5BR0VNRU5ULENPTExBQk9SQVRJT05fV09SS0ZMT1dfT1JDSEVTVFJBVElPTixBRE1JTl9TWVNURU1fUEFSQU1TLEFETUlOX1JFU09VUkNFU19NQU5BR0VNRU5ULEFETUlOX1VTRVJfUk9MRV9NQU5BR0VNRU5ULEFETUlOX1NZU1RFTV9EQVRBX01PREVMLEFETUlOX0NFUlRJRklDQVRJT04sQURNSU5fU1lTVEVNX1dPUktGTE9XX1JFUE9SVCxBRE1JTl9JVFNfREFOR0VST1VTX0NPTkZJRyxBRE1JTl9URVJSQUZPUk1fQ09ORklHLEFETUlOX1RFUlJBRk9STV9ERUJVRyxBRE1JTl9URVJNSU5BTF9BVURJVCxBRE1JTl9URVJNSU5BTF9DT05GSUcsc3lzdGVtX29wZXJhdGlvbl9sb2csTU9OSVRPUl9BRE1JTklTVFJBVE9SX0NPTkZJRyxyb2xlRixtb2RlbF9jb25maWd1cmF0aW9uLFRBU0tfUkVRVUVTVF9BVURJVCxTVVBFUl9BRE1JTixBRE1JTl9DTURCX01PREVMX01BTkFHRU1FTlQsQ01EQl9BRE1JTl9CQVNFX0RBVEFfTUFOQUdFTUVOVCxBRE1JTl9RVUVSWV9MT0csTUVOVV9BRE1JTl9QRVJNSVNTSU9OX01BTkFHRU1FTlQsTUVOVV9JRENfUkVTT1VSQ0VfUExBTk5JTkcsTUVOVV9DTURCX0FETUlOX0JBU0VfREFUQV9NQU5BR0VNRU5ULE1FTlVfREVTSUdOSU5HX0NJX0lOVEVHUkFURURfUVVFUllfRVhFQ1VUSU9OLE1FTlVfQVBQTElDQVRJT05fREVQTE9ZTUVOVF9ERVNJR04sTUVOVV9ERVNJR05JTkdfQ0lfREFUQV9NQU5BR0VNRU5ULE1FTlVfREVTSUdOSU5HX0NJX0lOVEVHUkFURURfUVVFUllfTUFOQUdFTUVOVCxNRU5VX0lEQ19QTEFOTklOR19ERVNJR04sTUVOVV9BUFBMSUNBVElPTl9BUkNISVRFQ1RVUkVfUVVFUlksTUVOVV9BUFBMSUNBVElPTl9BUkNISVRFQ1RVUkVfREVTSUdOLE1FTlVfREVTSUdOSU5HX0NJX0RBVEFfRU5RVUlSWSxNRU5VX0FETUlOX1FVRVJZX0xPRyxNRU5VX0FETUlOX0NNREJfTU9ERUxfTUFOQUdFTUVOVCxUQVNLX1JFUVVFU1RfTUFOQUdFTUVOVCxNT05JVE9SX01FVFJJQ19DT05GSUcsVEFTS19UQVNLX01BTkFHRU1FTlQsSUZBX09QUyx0ZXN0MDEsVEVTVF9NT05JVE9SLEpPQlNfU0VSVklDRV9DQVRBTE9HX01BTkFHRU1FTlQsSk9CU19UQVNLX01BTkFHRU1FTlQs6KeS6Imy566h55CG5ZGY5rWL6K-VLENVUkRfQURNSU4scm9va2llLXRlc3QtMixBUFBfREVWLEpPQlNfVEVNUExBVEVfR1JPVVBfTUFOQUdFTUVOVCxKT0JTX1RFTVBMQVRFX01BTkFHRU1FTlQsSk9CU19SRVFVRVNUX01BTkFHRU1FTlQsNTIxLXRlc3QsQ1VSRF9BRE1JTjMscm9va2llX3Rlc3Q3LFNVQl9TWVNURU0sdGVzdDUsdGVzdF9hYWEsSUZBX0FSQyxURVNULENVUkRfQURNSU5fdGVzdCxBUFBfQVJDLFNUR19PUFMsUFJEX09QUyxDRF9PUFNdIiwibmVlZFJlZ2lzdGVyIjpmYWxzZX0.AAj0VA4tNjs3LJdVGYrryrYaTdrWq8E3NwUbvIJbJ4UiSKuoJ3JrWO6Vvl3hkfkZsVm87TigoCaW3rF4Z2huiA'
    },
    // data: JSON.stringify(options.data || '')
    data: JSON.stringify(options.data)
  }
  // 导出请求时增加响应类型
  if (options.url.endsWith('/export')) {
    ajaxObj.responseType = 'blob'
  }
  return window.request ? window.request(ajaxObj) : axios(ajaxObj)
}
